<!DOCTYPE html>

<html>

	<head>
		<meta charset="utf-8">
		<script src='https://code.jquery.com/jquery-3.6.0.min.js'></script>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="" />
		<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>
		<style>
			#map{
			  height: 400px;
			}
		</style>
	</head>
	
	<body>

		<div id="map"></div>
		
		<script>
			navigator.geolocation.getCurrentPosition(successCallback, errorCallback);

			function successCallback(position) {
				let lat=position.coords.latitude;
				let lon=position.coords.longitude;

				$("#lon").text(lon);
				$("#lat").text(lat);
				var map = L.map('map').setView([lat, lon], 13);

				L.tileLayer(
						'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', 
						{attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}
					).addTo(map);

				L.marker([lat, lon]).addTo(map)
					.bindPopup('目前位置')
					.openPopup();

			}
			
			function errorCallback(error) {
				console.log(error)
			}

		</script>
	</body>
</html>